<% provide(:title, "All users" ) %>
<h1>ユーザー一覧</h1>
<div class="col-md-4 col-md-offset-1">
    <%= form_with(model: @user, local: true) do |f| %>
        <%= f.file_field :file, class:"seach_item"%>
        <div class="csv-btn">
          <%= f.submit "CSV出力", class: "btn btn-primary" %>
          <%# <form enctype="multipart/form-data" action="/users/import" accept-charset="UTF-8" method="post"> %>
          <%# <input type="file" name="file" id="file" class="form-control"> %>
          <%# <input type="submit" name="commit" value="CSVインポート" class="btn btn-primary btn-block" data-disable-with="CSVインポート"> %>
        </div>
    <% end %>
</div>


<div class="col-md-10 col-md-offset-1">
  <table class="table table-condensed tabke-hover" id="table-users" >

    <% @users.each do |user| %>
      <tr>
        <% if current_user.admin? && !current_user?(user)%>
        <td><%= link_to user.name, user, class: "form" %><br>
              <%= link_to "削除", user, method: :delete,
                  data: { confirm: "削除してよろしいですか？"},
                  class: "btn btn-primary" %>
        
        <div class="panel-group" id="accordion">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <button class="btn btn-primary btn-lg collapsed" type="button" data-toggle="collapse" data-parent="#accordion"
                  href="#collapse<%= user.id %>"  aria-expanded="false">編集</button>
              </h4>
            </div>
            <div id="collapse<%= user.id %>" class="panel-collapse collapse" >
              <div class="panel-body">
                <%= render "user",user: user %>
              </div>
            </div>
          </div>
        </div>
        </td>
        <% end %>   
      </tr> 
    <% end %> 
    
  </table>
  </div>
</div>

<!--モーダルウインドウ表示-->
<div id="edit-basic-info" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"></div>